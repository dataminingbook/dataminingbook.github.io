<div id="pf2d0" class="pf w0 h0" data-page-no="2d0"><div class="pc pc2d0 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg2d0.png"/><div class="t m0 x3 hc y78 ff2 fs0 fc1 sc0 ls0 ws0">708<span class="_ _13"> </span><span class="ffb">Deep<span class="_ _4"> </span>Learning</span></div><div class="t m0 x3 h4 y288 ff3 fs2 fc1 sc0 ls0 ws0">Let<span class="_ _9"> </span>last<span class="_ _3"> </span>step<span class="_ _9"> </span>follows<span class="_ _9"> </span>from<span class="_ _9"> </span>the<span class="_ _9"> </span>fa<span class="_"> </span>c<span class="_ _5"></span>t<span class="_ _3"> </span>that<span class="_ _9"> </span><span class="ff7">∂<span class="_ _e"></span><span class="ff6">f</span></span></div><div class="t m0 x7f h8 ya58 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xdd h4 y288 ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _4"> </span><span class="ff6">1<span class="ff3">,<span class="_ _9"> </span>since<span class="_ _9"> </span>max-pooling<span class="_ _9"> </span>implicitly<span class="_ _9"> </span>uses<span class="_ _9"> </span>an</span></span></div><div class="t m0 x3 h4 y289 ff3 fs2 fc1 sc0 ls0 ws0">identity<span class="_ _8"> </span>act<span class="_ _5"></span>ivation<span class="_ _f"> </span>f<span class="_"> </span>unct<span class="_ _5"></span>ion.<span class="_ _8"> </span>Note<span class="_ _8"> </span>tha<span class="_ _5"></span>t<span class="_ _8"> </span>we<span class="_ _8"> </span>also<span class="_ _6"> </span>implicitly<span class="_ _8"> </span>reshape<span class="_ _6"> </span>the<span class="_ _8"> </span>net<span class="_ _8"> </span>g<span class="_ _5"></span>radient<span class="_ _8"> </span>vect<span class="_"> </span>or</div><div class="t m0 x3 h21 y5c6 ffe fs2 fc1 sc0 ls0 ws0">δ</div><div class="t m0 x71 h8 y86d ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x69 h4 y5c6 ff3 fs2 fc1 sc0 ls0 ws0">,<span class="_ _4"> </span>so<span class="_ _4"> </span>that<span class="_ _4"> </span>its<span class="_ _6"> </span>size<span class="_ _2"> </span>is</div><div class="t m0 xae h1c yff6 ffd fs2 fc1 sc0 ls0 ws0"></div><div class="t m0 x2b h10 y5c6 ff7 fs2 fc1 sc0 ls0 ws0">(n</div><div class="t m0 xbd h8 y5c7 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xc7 h10 y5c6 ff7 fs2 fc1 sc0 ls0 ws0">)</div><div class="t m0 xa5 h8 yff7 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xd4 ha y5c6 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _f"></span><span class="ff7">n</span></div><div class="t m0 x48 h8 y5c7 ff3 fs4 fc1 sc0 ls0 ws0">3</div><div class="t m0 x30 h1c yff8 ffd fs2 fc1 sc0 ls0 ws0"></div><div class="t m0 xdf ha yff9 ff8 fs2 fc1 sc0 ls0 ws0">×</div><div class="t m0 x9d h1c yff8 ffd fs2 fc1 sc0 ls0 ws0"></div><div class="t m0 x74 h10 yff9 ff7 fs2 fc1 sc0 ls0 ws0">n</div><div class="t m0 xf1 h8 yffa ff3 fs4 fc1 sc0 ls0 ws0">3</div><div class="t m0 x4b h4 yff9 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _f"></span><span class="ff3">1</span></div><div class="t m0 x2d h1c yff8 ffd fs2 fc1 sc0 ls0 ws0"></div><div class="t m0 x5c ha yff9 ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _6"></span><span class="ff7">(n</span></div><div class="t m0 x4d h8 yffa ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x14 h10 yff9 ff7 fs2 fc1 sc0 ls0 ws0">)</div><div class="t m0 x15 h8 yffb ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x60 h4 yff9 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _f"></span><span class="ff3">1<span class="_ _6"> </span></span>=<span class="_ _6"></span><span class="ff7">n</span></div><div class="t m0 x24 h8 yffa ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x25 ha yff9 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _f"></span><span class="ff7">n</span></div><div class="t m0 x26 h8 yffa ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x103 h4 yff9 ff3 fs2 fc1 sc0 ls0 ws0">,<span class="_ _4"> </span>as<span class="_ _4"> </span>desired.</div><div class="t m0 x6 h4 yffc ff3 fs2 fc1 sc0 ls0 ws0">Consider<span class="_ _3"> </span>the<span class="_ _3"> </span>net<span class="_ _3"> </span>g<span class="_ _5"></span>radient<span class="_ _3"> </span><span class="ff7">δ</span></div><div class="t m0 x100 h8 yffd ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xbf h6 yffe ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x4a h4 yffc ff3 fs2 fc1 sc0 ls0 ws0">at<span class="_ _3"> </span>neuron<span class="_ _3"> </span><span class="ff7">z</span></div><div class="t m0 x5f h8 yffd ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x5f h6 yffe ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x15 h4 yffc ff3 fs2 fc1 sc0 ls0 ws0">in<span class="_ _3"> </span>layer<span class="_ _3"> </span><span class="ff7">l<span class="_ _3"> </span><span class="ff8">=<span class="_ _4"> </span></span></span>1<span class="_ _3"> </span>where<span class="_ _3"> </span><span class="ff7">i,<span class="_ _0"> </span>j<span class="_ _a"> </span><span class="ff8">=<span class="_ _2"> </span></span></span>1<span class="ff7">,<span class="_ _0"></span></span>2<span class="ff7">,<span class="_ _0"></span><span class="ff8">·<span class="_ _0"></span>·<span class="_ _0"></span>·<span class="_ _6"> </span></span>,<span class="_ _0"> </span>n</span></div><div class="t m0 x109 h8 yfff ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x11 h4 yffc ff3 fs2 fc1 sc0 ls0 ws0">.</div><div class="t m0 x3 h4 y1000 ff3 fs2 fc1 sc0 ls0 ws0">Since<span class="_ _3"> </span>we<span class="_ _3"> </span>assume<span class="_ _9"> </span>that<span class="_ _3"> </span>the<span class="_ _9"> </span>stride<span class="_ _3"> </span><span class="ff7">s</span></div><div class="t m0 x9d h8 y1001 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x75 h4 y1000 ff3 fs2 fc1 sc0 ls0 ws0">equals<span class="_ _3"> </span>the<span class="_ _9"> </span>ﬁlter<span class="_ _3"> </span>size<span class="_ _3"> </span><span class="ff7">k</span></div><div class="t m0 x25 h8 y1001 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xfe h4 y1000 ff3 fs2 fc1 sc0 ls0 ws0">for<span class="_ _3"> </span>the<span class="_ _3"> </span>ma<span class="_ _5"></span>x-pooling<span class="_ _3"> </span>layer,</div><div class="t m0 x3 h4 y1002 ff3 fs2 fc1 sc0 ls0 ws0">each<span class="_ _9"> </span>sliding<span class="_ _a"> </span>window<span class="_ _a"> </span>in<span class="_ _a"> </span>the<span class="_ _a"> </span>convolution<span class="_ _a"> </span>layer<span class="_ _a"> </span>contributes<span class="_ _9"> </span>only<span class="_ _a"> </span>to<span class="_ _a"> </span>one<span class="_ _a"> </span>neuron<span class="_ _a"> </span>at<span class="_ _a"> </span>the</div><div class="t m0 x3 h4 y1003 ff3 fs2 fc1 sc0 ls0 ws0">max-pooling<span class="_ _2"> </span>lay<span class="_ _5"></span>er.<span class="_ _2"> </span>Given<span class="_ _2"> </span>stride<span class="_ _3"> </span><span class="ff7">s</span></div><div class="t m0 x9d h8 y1004 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xbb ha y1003 ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _4"> </span><span class="ff7">k</span></div><div class="t m0 x7d h8 y1004 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xdc h4 y1003 ff3 fs2 fc1 sc0 ls0 ws0">,<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff7">k</span></div><div class="t m0 x5f h8 y1004 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x14 ha y1003 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _8"></span><span class="ff7">k</span></div><div class="t m0 x33 h8 y1004 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x83 h4 y1003 ff3 fs2 fc1 sc0 ls0 ws0">sliding<span class="_ _2"> </span>window<span class="_ _3"> </span>that<span class="_ _2"> </span>contains<span class="_ _3"> </span><span class="ff7">z</span></div><div class="t m0 x106 h8 y1005 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x78 h6 y1006 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x109 h4 y5ce ff3 fs2 fc1 sc0 ls0 ws0">is</div><div class="t m0 x3 h4 y5d0 ff3 fs2 fc1 sc0 ls0 ws0">given<span class="_ _4"> </span>as<span class="_ _4"> </span><span class="ff6">Z</span></div><div class="t m0 xd0 h8 y1007 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xd0 h6 y1008 ff7 fs4 fc1 sc0 ls0 ws0">k</div><div class="t m0 xe9 h20 y1009 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 xe4 h4 y100a ff7 fs2 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span>,<span class="_ _0"> </span>b<span class="_ _5"></span>)<span class="ff3">,<span class="_ _4"> </span>where</span></div><div class="t m0 x46 ha y100b ff7 fs2 fc1 sc0 ls0 ws0">a<span class="_ _4"> </span><span class="ff8">=</span></div><div class="t m0 x47 h1c y100c ffd fs2 fc1 sc0 ls0 ws0">l</div><div class="t m0 x7c h10 y100d ff7 fs2 fc1 sc0 ls0 ws0">i</div><div class="t m0 xc h10 y100e ff7 fs2 fc1 sc0 ls0 ws0">s</div><div class="t m0 x48 h8 y100f ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x30 h1c y1010 ffd fs2 fc1 sc0 ls0 ws0">m</div><div class="t m0 xfb ha y1011 ff7 fs2 fc1 sc0 ls0 ws0">b<span class="_ _6"> </span><span class="ff8">=</span></div><div class="t m0 x8e h1c y1010 ffd fs2 fc1 sc0 ls0 ws0">l</div><div class="t m0 x2f h10 y1012 ff7 fs2 fc1 sc0 ls0 ws0">j</div><div class="t m0 x2f h10 y100e ff7 fs2 fc1 sc0 ls0 ws0">s</div><div class="t m0 x40 h8 y100f ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x5a h1c y1010 ffd fs2 fc1 sc0 ls0 ws0">m</div><div class="t m0 x3 h4 y1013 ff3 fs2 fc1 sc0 ls0 ws0">Due<span class="_ _19"> </span>to<span class="_ _c"> </span>the<span class="_ _19"> </span>max<span class="_ _19"> </span>aggregation<span class="_ _c"> </span>function,<span class="_ _19"> </span>the<span class="_ _c"> </span>ma<span class="_ _5"></span>ximum<span class="_ _c"> </span>v<span class="_ _5"></span>alued<span class="_ _c"> </span>e<span class="_ _5"></span>lement<span class="_ _19"> </span>in<span class="_ _c"> </span><span class="ff6">Z</span></div><div class="t m0 xc4 h8 y1014 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xc4 h6 y1015 ff7 fs4 fc1 sc0 ls0 ws0">k</div><div class="t m0 xcc h20 y1016 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 xcd h10 y1017 ff7 fs2 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span>,<span class="_ _0"> </span>b<span class="_ _5"></span>)</div><div class="t m0 x3 h4 y1018 ff3 fs2 fc1 sc0 ls0 ws0">speciﬁes<span class="_ _4"> </span>the<span class="_ _4"> </span>value<span class="_ _4"> </span>of<span class="_ _6"> </span>neuron<span class="_ _4"> </span><span class="ff7">z</span></div><div class="t m0 x30 h8 y1019 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x30 h6 y101a ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x31 h4 y101b ff3 fs2 fc1 sc0 ls0 ws0">in<span class="_ _4"> </span>the<span class="_ _4"> </span>max-pooling<span class="_ _4"> </span>layer<span class="_ _6"> </span><span class="ff7">l<span class="_ _2"> </span><span class="ff8">=<span class="_ _6"></span></span></span>2.<span class="_ _4"> </span>That<span class="_ _4"> </span>is,</div><div class="t m0 x47 h10 y101c ff7 fs2 fc1 sc0 ls0 ws0">z</div><div class="t m0 x9b h8 y101d ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x9b h6 y101e ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x30 h4 y101f ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _3b"> </span><span class="ff3">max</span></div><div class="t m0 x31 h8 y1020 ff7 fs4 fc1 sc0 ls0 ws0">i,j<span class="_ _e"></span><span class="ff8">=<span class="ff3">1</span></span>,<span class="ff3">2</span>,..<span class="_ _12"></span>.<span class="_ _5"></span>,k</div><div class="t m0 x38 h20 y1021 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x2e h1c y1022 ffd fs2 fc1 sc0 ls0 ws0">n</div><div class="t m0 x7f h10 y101f ff7 fs2 fc1 sc0 ls0 ws0">z</div><div class="t m0 x37 h8 y1023 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x37 h8 y1024 ff7 fs4 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span><span class="ff8">−<span class="ff3">1</span></span>)<span class="ff8">·</span>k</div><div class="t m0 x60 h20 y1025 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x92 h8 y1024 ff8 fs4 fc1 sc0 ls0 ws0">+<span class="ff7">i,(b</span>−<span class="ff3">1<span class="ff7">)</span></span>·<span class="ff7">k</span></div><div class="t m0 x68 h20 y1025 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x25 h11 y1024 ff8 fs4 fc1 sc0 ls0 ws0">+<span class="ff7">j</span></div><div class="t m0 x2f h1c y1026 ffd fs2 fc1 sc0 ls0 ws0">o</div><div class="t m0 xa5 h10 y1027 ff7 fs2 fc1 sc0 ls0 ws0">i</div><div class="t m0 xb0 h11 y1028 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 xa3 h10 y1027 ff7 fs2 fc1 sc0 ls0 ws0">,<span class="_ _e"></span>j</div><div class="t m0 x3b h11 y1028 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 x30 h4 y1027 ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _7"> </span><span class="ff3">a<span class="_ _5"></span>rg<span class="_ _8"> </span>max</span></div><div class="t m0 x31 h8 y1029 ff7 fs4 fc1 sc0 ls0 ws0">i,j<span class="_ _e"></span><span class="ff8">=<span class="ff3">1</span></span>,<span class="ff3">2</span>,..<span class="_ _12"></span>.<span class="_ _5"></span>,k</div><div class="t m0 x38 h20 y102a ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x2e h1c y102b ffd fs2 fc1 sc0 ls0 ws0">n</div><div class="t m0 x7f h10 y102c ff7 fs2 fc1 sc0 ls0 ws0">z</div><div class="t m0 x37 h8 y102d ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x37 h8 y102e ff7 fs4 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span><span class="ff8">−<span class="ff3">1</span></span>)<span class="ff8">·</span>k</div><div class="t m0 x60 h20 y102f ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x92 h8 y102e ff8 fs4 fc1 sc0 ls0 ws0">+<span class="ff7">i,(b</span>−<span class="ff3">1<span class="ff7">)</span></span>·<span class="ff7">k</span></div><div class="t m0 x68 h20 y102f ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x25 h11 y102e ff8 fs4 fc1 sc0 ls0 ws0">+<span class="ff7">j</span></div><div class="t m0 x2f h1c y1030 ffd fs2 fc1 sc0 ls0 ws0">o</div><div class="t m0 x3 h4 y1031 ff3 fs2 fc1 sc0 ls0 ws0">where<span class="_ _4"> </span><span class="ff7">i</span></div><div class="t m0 x1d h11 y1032 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 x62 h10 y1031 ff7 fs2 fc1 sc0 ls0 ws0">,<span class="_ _e"></span>j</div><div class="t m0 xe9 h11 y1032 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 x1b h4 y1031 ff3 fs2 fc1 sc0 ls0 ws0">is<span class="_ _4"> </span>the<span class="_ _4"> </span>index<span class="_ _4"> </span>of<span class="_ _4"> </span>the<span class="_ _6"> </span>ma<span class="_ _5"></span>ximum<span class="_ _4"> </span>valued<span class="_ _4"> </span>neuron<span class="_ _6"> </span>in<span class="_ _4"> </span>the<span class="_ _4"> </span>window<span class="_ _4"> </span><span class="ff6">Z</span></div><div class="t m0 x84 h8 y1032 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x84 h6 y1033 ff7 fs4 fc1 sc0 ls0 ws0">k</div><div class="t m0 xd h20 y1034 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x66 h4 y1031 ff7 fs2 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span>,<span class="_ _0"> </span>b<span class="_ _5"></span>)<span class="ff3">.</span></div><div class="t m0 x6 h4 y1035 ff3 fs2 fc1 sc0 ls0 ws0">The<span class="_ _4"> </span>net<span class="_ _4"> </span>gradient<span class="_ _4"> </span><span class="ff7">δ</span></div><div class="t m0 x46 h8 y1036 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x46 h6 y1037 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 xa5 h4 y1035 ff3 fs2 fc1 sc0 ls0 ws0">at<span class="_ _4"> </span>neuron<span class="_ _4"> </span><span class="ff7">z</span></div><div class="t m0 xf1 h8 y1036 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xf1 h6 y1037 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 xde h4 y1035 ff3 fs2 fc1 sc0 ls0 ws0">is<span class="_ _4"> </span>therefore<span class="_ _4"> </span>given<span class="_ _4"> </span>as</div><div class="t m0 x58 h10 y1038 ff7 fs2 fc1 sc0 ls0 ws0">δ</div><div class="t m0 xa3 h8 y1039 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xd4 h6 y103a ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x9b ha y1038 ff8 fs2 fc1 sc0 ls0 ws0">=</div><div class="t m0 xdf h7 y103b ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff9">E</span></div><div class="t m0 x9d h1d y103c ff6 fs4 fc1 sc0 ls0 ws0">X</div><div class="t m0 xf6 h22 y103d ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff4">net</span></div><div class="t m0 xbb h8 y103e ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xb7 h6 y103f ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x9e ha y1040 ff8 fs2 fc1 sc0 ls0 ws0">=</div><div class="t m0 x2d h7 y1041 ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff9">E</span></div><div class="t m0 x7f h1d y1042 ff6 fs4 fc1 sc0 ls0 ws0">X</div><div class="t m0 xdc h22 y103d ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff4">net</span></div><div class="t m0 x37 h8 y103e ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x37 h6 y103f ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 xe3 ha y1040 ff8 fs2 fc1 sc0 ls0 ws0">·</div><div class="t m0 x14 h22 y1041 ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff4">net</span></div><div class="t m0 x29 h8 y1043 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x34 h6 y1044 ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x32 h10 y103d ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span>z</div><div class="t m0 x28 h8 y103e ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x10a h6 y103f ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x35 ha y1040 ff8 fs2 fc1 sc0 ls0 ws0">·</div><div class="t m0 x94 h10 y1045 ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span>z</div><div class="t m0 x8e h8 y1046 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x8e h6 y1047 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x17 h22 y103d ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff4">net</span></div><div class="t m0 x3f h8 y103e ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xfe h6 y103f ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x9e ha y1048 ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _6"></span><span class="ff7">δ</span></div><div class="t m0 x2d h8 y1049 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xb1 h6 y104a ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x5c ha y1048 ff8 fs2 fc1 sc0 ls0 ws0">·</div><div class="t m0 x5d h22 y104b ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span><span class="ff4">net</span></div><div class="t m0 x15 h8 y104c ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x4e h6 y104d ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x5e h10 y104e ff7 fs2 fc1 sc0 ls0 ws0">∂<span class="_ _e"></span>z</div><div class="t m0 x14 h8 y104f ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x14 h6 y1050 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x61 ha y1051 ff8 fs2 fc1 sc0 ls0 ws0">·<span class="_ _f"></span><span class="ff7">∂<span class="_ _1c"></span>f</span></div><div class="t m0 x35 h8 y1052 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x65 h6 y1053 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x3 h4 y1054 ff3 fs2 fc1 sc0 ls0 ws0">where<span class="_ _4"> </span><span class="ff4">net</span></div><div class="t m0 xd9 h6 y1055 ff7 fs4 fc1 sc0 ls0 ws0">l</div><div class="t m0 xd8 h6 y1056 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x6e h4 y1057 ff3 fs2 fc1 sc0 ls0 ws0">denotes<span class="_ _4"> </span>the<span class="_ _4"> </span>net<span class="_ _4"> </span>input<span class="_ _2"> </span>at<span class="_ _4"> </span>neuron<span class="_ _2"> </span><span class="ff7">z</span></div><div class="t m0 x13 h6 y1058 ff7 fs4 fc1 sc0 ls0 ws0">l</div><div class="t m0 x13 h6 y1059 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x14 h4 y105a ff3 fs2 fc1 sc0 ls0 ws0">in<span class="_ _4"> </span>layer<span class="_ _4"> </span><span class="ff7">l<span class="_ _e"></span></span>.<span class="_ _4"> </span>However,<span class="_ _4"> </span>since<span class="_ _4"> </span><span class="ff4">net</span></div><div class="t m0 x22 h8 y105b ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x51 h6 y1059 ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 x4f ha y105a ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _6"> </span><span class="ff7">z</span></div><div class="t m0 xea h8 y105b ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xea h6 y105c ff7 fs4 fc1 sc0 ls0 ws0">i</div><div class="t m0 x78 h86 y105d ff8 fsc fc1 sc0 ls0 ws0">∗</div><div class="t m0 x6b h6 y105c ff7 fs4 fc1 sc0 ls0 ws0">,j</div><div class="t m0 x109 h86 y105d ff8 fsc fc1 sc0 ls0 ws0">∗</div><div class="t m0 x11 h4 y105e ff3 fs2 fc1 sc0 ls0 ws0">,</div><div class="t m0 x3 h4 y105f ff3 fs2 fc1 sc0 ls0 ws0">the<span class="_ _2"> </span>partial<span class="_ _2"> </span>deriva<span class="_ _5"></span>tive</div><div class="t m0 xaf hf y1060 ff7 fs4 fc1 sc0 ls0 ws0">∂<span class="_ _5"></span><span class="ff4">net</span></div><div class="t m0 xc2 h20 y1061 ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x58 h1e y1062 ff7 fsc fc1 sc0 ls0 ws0">a<span class="_"> </span>b</div><div class="t m0 xbd h6 y1063 ff7 fs4 fc1 sc0 ls0 ws0">∂<span class="_ _5"></span>z</div><div class="t m0 xa5 h20 y1064 ff3 fsc fc1 sc0 ls0 ws0">1</div><div class="t m0 xa5 h1e y1065 ff7 fsc fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 xb2 h4 y1066 ff3 fs2 fc1 sc0 ls0 ws0">is<span class="_ _2"> </span>eithe<span class="_ _5"></span>r<span class="_ _2"> </span>1<span class="_ _2"> </span>or<span class="_ _2"> </span>0<span class="_ _5"></span>,<span class="_ _4"> </span>de<span class="_ _5"></span>pending<span class="_ _2"> </span>on<span class="_ _2"> </span>whet<span class="_ _5"></span>her<span class="_ _2"> </span><span class="ff7">z</span></div><div class="t m0 xfd h8 y1067 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xfd h6 y1068 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x98 h4 y1066 ff3 fs2 fc1 sc0 ls0 ws0">is<span class="_ _2"> </span>the<span class="_ _2"> </span>maximum</div><div class="t m0 x3 h4 y1069 ff3 fs2 fc1 sc0 ls0 ws0">element<span class="_ _4"> </span>in<span class="_ _4"> </span>the<span class="_ _4"> </span>window<span class="_ _6"> </span><span class="ff6">Z</span></div><div class="t m0 x58 h8 y106a ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x58 h6 y106b ff7 fs4 fc1 sc0 ls0 ws0">k</div><div class="t m0 xd4 h20 y106c ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x47 h4 y1069 ff7 fs2 fc1 sc0 ls0 ws0">(a<span class="_ _5"></span>,<span class="_ _0"> </span>b<span class="_ _5"></span>)<span class="_ _4"> </span><span class="ff3">or<span class="_ _4"> </span>not.<span class="_ _4"> </span>Putting<span class="_ _4"> </span>it<span class="_ _4"> </span>all<span class="_ _4"> </span>together,<span class="_ _6"> </span>we<span class="_ _4"> </span>hav<span class="_"> </span>e</span></div><div class="t m0 xc2 h10 y106d ff7 fs2 fc1 sc0 ls0 ws0">δ</div><div class="t m0 xa3 h8 y106e ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xa3 h6 y106f ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 xc ha y1070 ff8 fs2 fc1 sc0 ls0 ws0">=</div><div class="t m0 x30 h1c y1071 ffd fs2 fc1 sc0 ls0 ws0">(</div><div class="t m0 xbf h10 y1072 ff7 fs2 fc1 sc0 ls0 ws0">δ</div><div class="t m0 x49 h8 y1073 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xb6 h6 y1074 ff7 fs4 fc1 sc0 ls0 ws0">a<span class="_ _5"></span>b</div><div class="t m0 xbb ha y1075 ff8 fs2 fc1 sc0 ls0 ws0">·<span class="_ _f"></span><span class="ff7">∂<span class="_ _1c"></span>f</span></div><div class="t m0 x7d h8 y1076 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x36 h6 y1077 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x5c h4 y1078 ff3 fs2 fc1 sc0 ls0 ws0">if<span class="_ _4"> </span><span class="ff7">i<span class="_ _4"> </span><span class="ff8">=<span class="_ _6"> </span></span>i</span></div><div class="t m0 x32 h11 y1079 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 x92 h4 y1078 ff3 fs2 fc1 sc0 ls0 ws0">and<span class="_ _4"> </span><span class="ff7">j<span class="_ _2"> </span><span class="ff8">=<span class="_ _6"> </span></span>j</span></div><div class="t m0 xfe h11 y1079 ff8 fs4 fc1 sc0 ls0 ws0">∗</div><div class="t m0 xbf h4 y107a ff3 fs2 fc1 sc0 ls0 ws0">0<span class="_ _5c"> </span>otherwise</div><div class="t m0 x6 h4 y107b ff3 fs2 fc1 sc0 ls0 ws0">In<span class="_ _9"> </span>other<span class="_ _3"> </span>words,<span class="_ _a"> </span>the<span class="_ _3"> </span>net<span class="_ _9"> </span>g<span class="_ _5"></span>radient<span class="_ _3"> </span>a<span class="_ _5"></span>t<span class="_ _3"> </span>neuron<span class="_ _9"> </span><span class="ff7">z</span></div><div class="t m0 x82 h8 y107c ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x82 h6 y107d ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x29 h4 y107b ff3 fs2 fc1 sc0 ls0 ws0">in<span class="_ _9"> </span>the<span class="_ _9"> </span>convolution<span class="_ _9"> </span>layer<span class="_ _9"> </span>is<span class="_ _9"> </span>zero<span class="_ _9"> </span>if</div><div class="t m0 x3 h4 y107e ff3 fs2 fc1 sc0 ls0 ws0">this<span class="_ _9"> </span>neuron<span class="_ _a"> </span>does<span class="_ _a"> </span>not<span class="_ _9"> </span>have<span class="_ _a"> </span>the<span class="_ _a"> </span>maximum<span class="_ _9"> </span>v<span class="_ _5"></span>alue<span class="_ _9"> </span>in<span class="_ _a"> </span>its<span class="_ _a"> </span>window.<span class="_ _9"> </span>Otherwise,<span class="_ _a"> </span>if<span class="_ _a"> </span>it<span class="_ _9"> </span>is<span class="_ _a"> </span>the</div><div class="t m0 x3 h4 y107f ff3 fs2 fc1 sc0 ls0 ws0">maximum,<span class="_ _4"> </span>the<span class="_ _6"> </span>net<span class="_ _4"> </span>gradie<span class="_"> </span>nt<span class="_ _4"> </span>backpropaga<span class="_ _5"></span>tes<span class="_ _6"> </span>f<span class="_"> </span>rom<span class="_ _4"> </span>the<span class="_ _4"> </span>max-pooling<span class="_ _4"> </span>layer<span class="_ _4"> </span>to<span class="_ _4"> </span>this<span class="_ _4"> </span>neuron</div><div class="t m0 x3 h4 y1080 ff3 fs2 fc1 sc0 ls0 ws0">and<span class="_ _2"> </span>is<span class="_ _2"> </span>then<span class="_ _2"> </span>multiplied<span class="_ _2"> </span>by<span class="_ _3"> </span>the<span class="_ _2"> </span>partial<span class="_ _2"> </span>derivative<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _3"> </span>activat<span class="_ _5"></span>ion<span class="_ _4"> </span>function.<span class="_ _2"> </span>The<span class="_ _2"> </span><span class="ff7">n</span></div><div class="t m0 x3d h8 y1081 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xea ha y1080 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _8"></span><span class="ff7">n</span></div><div class="t m0 x86 h8 y1081 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x3 h4 y1082 ff3 fs2 fc1 sc0 ls0 ws0">matrix<span class="_ _4"> </span>of<span class="_ _4"> </span>net<span class="_ _6"> </span>g<span class="_ _5"></span>radients<span class="_ _4"> </span><span class="ffe">δ</span></div><div class="t m0 xa5 h8 y1083 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xd4 h4 y1082 ff3 fs2 fc1 sc0 ls0 ws0">comprises<span class="_ _4"> </span>the<span class="_ _4"> </span>net<span class="_ _4"> </span>graidents<span class="_ _4"> </span><span class="ff7">δ</span></div><div class="t m0 x17 h8 y1084 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 x105 h6 y1085 ff7 fs4 fc1 sc0 ls0 ws0">i<span class="_ _12"></span>j</div><div class="t m0 x68 h4 y1086 ff3 fs2 fc1 sc0 ls0 ws0">for<span class="_ _4"> </span>all<span class="_ _4"> </span><span class="ff7">i,<span class="_ _0"></span>j<span class="_ _3"> </span><span class="ff8">=<span class="_ _6"></span></span></span>1<span class="ff7">,<span class="_ _0"></span></span>2<span class="ff7">,<span class="_ _0"></span><span class="ff8">·<span class="_ _e"></span>·<span class="_ _0"></span>·<span class="_ _4"> </span></span>,<span class="_ _0"></span>n</span></div><div class="t m0 x107 h8 y1087 ff3 fs4 fc1 sc0 ls0 ws0">1</div><div class="t m0 xf h4 y1086 ff3 fs2 fc1 sc0 ls0 ws0">.</div><div class="t m0 x6 h4 y1088 ff3 fs2 fc1 sc0 ls0 ws0">From<span class="_ _2"> </span>the<span class="_ _4"> </span>net<span class="_ _2"> </span>g<span class="_ _5"></span>radients,<span class="_ _4"> </span>we<span class="_ _2"> </span>can<span class="_ _2"> </span>compute<span class="_ _2"> </span>the<span class="_ _2"> </span>gradients<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _4"> </span>we<span class="_ _5"></span>ight<span class="_ _2"> </span>matrices<span class="_ _4"> </span>and</div><div class="t m0 x3 h4 y1089 ff3 fs2 fc1 sc0 ls0 ws0">bias<span class="_ _3"> </span>parameters.<span class="_ _3"> </span>For<span class="_ _3"> </span>the<span class="_ _3"> </span>fully<span class="_ _3"> </span>connected<span class="_ _3"> </span>lay<span class="_ _5"></span>ers,<span class="_ _3"> </span>that<span class="_ _2"> </span>is,<span class="_ _9"> </span>between<span class="_ _3"> </span><span class="ff7">l<span class="_ _3"> </span><span class="ff8">=<span class="_ _4"> </span></span></span>2<span class="_ _3"> </span>and<span class="_ _3"> </span><span class="ff7">l<span class="_ _3"> </span><span class="ff8">=<span class="_ _4"> </span></span></span>3,<span class="_ _3"> </span>and</div><div class="t m0 x3 h4 y108a ff7 fs2 fc1 sc0 ls0 ws0">l<span class="_ _4"> </span><span class="ff8">=<span class="_ _8"></span><span class="ff3">3<span class="_ _4"> </span>and<span class="_ _4"> </span></span></span>l<span class="_ _4"> </span><span class="ff8">=<span class="_ _6"> </span><span class="ff3">4,<span class="_ _4"> </span>we<span class="_ _4"> </span>have</span></span></div><div class="t m0 x67 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">∇</div><div class="t m0 x6d h1d y108c ff6 fs4 fc1 sc0 ls0 ws0">W</div><div class="t m0 x1a h20 y108d ff3 fsc fc1 sc0 ls0 ws0">3</div><div class="t m0 x1b ha y108b ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _6"></span><span class="ff6">Z</span></div><div class="t m0 x104 h8 y108e ff3 fs4 fc1 sc0 ls0 ws0">3</div><div class="t m0 xf9 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">·<span class="_ _f"></span><span class="ff7">(<span class="ffe">δ</span></span></div><div class="t m0 x9 h6 y108f ff7 fs4 fc1 sc0 ls0 ws0">o</div><div class="t m0 xa h10 y108b ff7 fs2 fc1 sc0 ls0 ws0">)</div><div class="t m0 xaf hf y108e ff4 fs4 fc1 sc0 ls0 ws0">T</div><div class="t m0 x9c ha y108b ff8 fs2 fc1 sc0 ls0 ws0">∇</div><div class="t m0 x31 h1d y108c ff6 fs4 fc1 sc0 ls0 ws0">b</div><div class="t m0 xda h20 y108d ff3 fsc fc1 sc0 ls0 ws0">3</div><div class="t m0 xb7 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _8"></span><span class="ffe">δ</span></div><div class="t m0 x9f h6 y108f ff7 fs4 fc1 sc0 ls0 ws0">o</div><div class="t m0 x14 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">∇</div><div class="t m0 x32 h1d y108c ff6 fs4 fc1 sc0 ls0 ws0">W</div><div class="t m0 x92 h20 y108d ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 x34 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _6"></span><span class="ff6">Z</span></div><div class="t m0 x17 h8 y108e ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 x94 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">·<span class="_ _f"></span><span class="ff7">(<span class="ffe">δ</span></span></div><div class="t m0 xfe h8 y108f ff3 fs4 fc1 sc0 ls0 ws0">3</div><div class="t m0 x96 h10 y108b ff7 fs2 fc1 sc0 ls0 ws0">)</div><div class="t m0 xdb hf y108e ff4 fs4 fc1 sc0 ls0 ws0">T</div><div class="t m0 x98 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">∇</div><div class="t m0 x10b h1d y108c ff6 fs4 fc1 sc0 ls0 ws0">b</div><div class="t m0 xf8 h20 y108d ff3 fsc fc1 sc0 ls0 ws0">2</div><div class="t m0 xc8 ha y108b ff8 fs2 fc1 sc0 ls0 ws0">=<span class="_ _8"></span><span class="ffe">δ</span></div><div class="t m0 xa8 h8 y108f ff3 fs4 fc1 sc0 ls0 ws0">3</div><div class="t m0 x3 h4 y1090 ff3 fs2 fc1 sc0 ls0 ws0">where<span class="_ _4"> </span>we<span class="_ _4"> </span>treat<span class="_ _6"> </span><span class="ff6">Z</span></div><div class="t m0 x7 h8 y1091 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xb4 h4 y1090 ff3 fs2 fc1 sc0 ls0 ws0">as<span class="_ _4"> </span>a<span class="_ _4"> </span><span class="ff7">(n</span></div><div class="t m0 x58 h8 y1092 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xd4 h10 y1090 ff7 fs2 fc1 sc0 ls0 ws0">)</div><div class="t m0 x47 h8 y1091 ff3 fs4 fc1 sc0 ls0 ws0">2</div><div class="t m0 xc h4 y1090 ff8 fs2 fc1 sc0 ls0 ws0">×<span class="_ _f"></span><span class="ff3">1<span class="_ _4"> </span>vector.</span></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
